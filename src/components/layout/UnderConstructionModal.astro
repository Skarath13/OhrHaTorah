---
// Under Construction Modal - Shows when clicking placeholder nav links
---

<!-- Under Construction Modal -->
<div id="underConstructionModal" class="uc-modal">
  <div class="uc-modal-backdrop"></div>
  <div class="uc-modal-content">
    <div class="uc-icon-container">
      <i class="fas fa-hard-hat uc-icon"></i>
    </div>
    <h2>Coming Soon!</h2>
    <p>This page is under construction.</p>
  </div>
</div>

<style>
  .uc-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 10004;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }

  .uc-modal.visible {
    display: flex;
  }

  .uc-modal-backdrop {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    animation: fadeIn 0.3s ease;
  }

  .uc-modal-content {
    position: relative;
    background: white;
    border-radius: 20px;
    padding: 36px 40px;
    width: 100%;
    max-width: 300px;
    box-shadow: 0 25px 60px -12px rgba(0, 0, 0, 0.35);
    text-align: center;
    animation: modalBounceIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes modalBounceIn {
    from {
      opacity: 0;
      transform: scale(0.8) translateY(-30px);
    }
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  .uc-icon-container {
    margin-bottom: 16px;
  }

  .uc-icon {
    font-size: 48px;
    color: #f6ad55;
    animation: iconWobble 2s ease-in-out infinite;
  }

  @keyframes iconWobble {
    0%, 100% { transform: rotate(-5deg); }
    50% { transform: rotate(5deg); }
  }

  .uc-modal-content h2 {
    color: #2d3748;
    font-size: 22px;
    margin: 0 0 8px 0;
    font-weight: 700;
  }

  .uc-modal-content p {
    color: #718096;
    font-size: 15px;
    margin: 0;
    line-height: 1.5;
  }

  /* Exit animation */
  .uc-modal.hiding .uc-modal-content {
    animation: modalSlideOut 0.25s ease forwards;
  }

  .uc-modal.hiding .uc-modal-backdrop {
    animation: fadeOut 0.25s ease forwards;
  }

  @keyframes modalSlideOut {
    to {
      opacity: 0;
      transform: scale(0.9) translateY(-20px);
    }
  }

  @keyframes fadeOut {
    to { opacity: 0; }
  }

  @media (max-width: 480px) {
    .uc-modal-content {
      padding: 32px 28px;
      max-width: 280px;
    }

    .uc-icon {
      font-size: 42px;
    }

    .uc-modal-content h2 {
      font-size: 20px;
    }
  }
</style>

<script is:inline>
(function() {
  'use strict';

  const modal = document.getElementById('underConstructionModal');
  const backdrop = modal.querySelector('.uc-modal-backdrop');
  let autoCloseTimer = null;

  window.showUnderConstructionModal = function() {
    modal.classList.remove('hiding');
    modal.classList.add('visible');

    // Auto-close after 2.5 seconds
    autoCloseTimer = setTimeout(() => {
      window.hideUnderConstructionModal();
    }, 2500);
  };

  window.hideUnderConstructionModal = function() {
    if (autoCloseTimer) {
      clearTimeout(autoCloseTimer);
      autoCloseTimer = null;
    }

    modal.classList.add('hiding');

    setTimeout(() => {
      modal.classList.remove('visible', 'hiding');
    }, 250);
  };

  // Click backdrop to close early
  backdrop.addEventListener('click', window.hideUnderConstructionModal);

  // Click anywhere on modal to close early
  modal.addEventListener('click', (e) => {
    if (e.target === modal || e.target.closest('.uc-modal-content')) {
      window.hideUnderConstructionModal();
    }
  });

  // Escape key closes modal
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && modal.classList.contains('visible')) {
      window.hideUnderConstructionModal();
    }
  });

  // Intercept all placeholder links (href="#" that aren't anchors)
  document.addEventListener('click', (e) => {
    const link = e.target.closest('a[href="#"]');
    if (link) {
      // Make sure it's not an actual anchor link or toggle
      const isNavLink = link.closest('.nav-links, .dropdown-content');
      if (isNavLink) {
        e.preventDefault();
        window.showUnderConstructionModal();
      }
    }
  });
})();
</script>
